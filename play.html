<!DOCTYPE html>
<html lang="en" class="w-full h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/src/css/events.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <title>Onyx</title>
    <style>
        .fullscreen-btn {
            position: absolute;
            top: 90%; /* Adjust as needed */
            right: 8%; /* Adjust as needed */
            background-color: rgba(0, 0, 0, 0.541); /* Semi-transparent background */
            border: none;
            border-radius: 5px;
            padding: 5px 10px;
            cursor: pointer;
            z-index: 100; /* Ensure it is above other elements */
            transition: background-color 0.3s;
        }

        .fullscreen-btn:hover {
            background-color: rgba(0, 0, 0, 0.8); /* Darken on hover */
        }   
    </style>
</head>

<body class="flex flex-col h-screen" style="background: linear-gradient(to left top, rgb(16, 52, 82), rgb(9, 34, 55), black) center center / cover no-repeat fixed; height: 100%; font-family: 'Arial', sans-serif; font-weight: bold;"></body>

    <!-- Floating Navbar -->
    <nav class="fixed top-4 left-1/2 transform -translate-x-1/2 z-50 flex items-center bg-white/10 backdrop-blur-lg px-6 py-2 rounded-full shadow-lg border border-gray-700" style="box-shadow: 0 0 10px 2px rgba(255, 255, 255, 0.8);">
        <div class="flex items-center space-x-4">
            <!-- Logo -->
            <img src="src\content\O-removebg-preview.png" alt="Onyx Logo" class="h-12 rounded-full border border-white/10">

            <!-- Nav Links -->
            <ul class="flex space-x-6">
                <li>
                    <a href="index.html" class="text-white hover:text-gray-300 transition-all flex items-center space-x-2">
                        <i data-lucide="house"></i> <span>Home</span>
                    </a>
                </li>
                <li>
                    <a href="events.html" class="text-white hover:text-gray-300 transition-all flex items-center space-x-2">
                        <i data-lucide="joystick"></i> <span>Games</span>
                    </a>
                </li>
                <li>
                    <a href="/search/index.html" class="text-white hover:text-gray-300 transition-all flex items-center space-x-2">
                        <i data-lucide="search"></i> <span>Search</span>
                    </a>
                </li>
            </ul>
        </div>
    </nav>
    

    <!-- Main Content: Game Display -->
    <div class="flex justify-center items-center h-[calc(92vh-3rem)] mt-[6rem] relative"> <!-- Added relative positioning -->
        <iframe id="game" class="rounded-[10px] w-[90%] h-full shadow-[0_0_20px_rgba(255,255,255,0.5)]"></iframe> <!-- Set height to full to use available height -->
        <button class="fullscreen-btn" id="fullscreenBtn">Fullscreen</button> <!-- Fullscreen button -->
    </div>

    <!-- Game Loading Script -->
    <script>
        let game = localStorage.getItem("game");
        if (game) {
            game = JSON.parse(game);
            const gamecdn = "https://assets.zyph3r.com/";
            const gameUrl = `${gamecdn}${game.root}/${game.file}`;

            const iframe = document.querySelector("#game");
            iframe.src = gameUrl;
            iframe.onload = () => {
                iframe.style.display = "block";
            };
        } else {
            console.error('No game found.');
        }

        // Fullscreen functionality
        const fullscreenBtn = document.getElementById("fullscreenBtn");
        const iframe = document.getElementById("game");

        fullscreenBtn.addEventListener("click", () => {
            if (document.fullscreenElement) {
                document.exitFullscreen();
            } else {
                iframe.requestFullscreen();
            }
        });

        // Show or hide the fullscreen button based on fullscreen state
        document.addEventListener("fullscreenchange", () => {
            if (document.fullscreenElement) {
                fullscreenBtn.textContent = "Exit Fullscreen"; // Change button text
                fullscreenBtn.classList.remove("hidden"); // Show the button
            } else {
                fullscreenBtn.textContent = "Fullscreen"; // Change button text back
                fullscreenBtn.classList.remove("hidden"); // Show the button
            }
        });

        // Hide the button initially
        fullscreenBtn.classList.remove("hidden");
    </script>

    <script src="/src/js/games.js"></script>
    <script>
        lucide.createIcons();
    </script>
</body>
</html>
